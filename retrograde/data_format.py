import json
from datetime import datetime, timedelta
date = [
    '2023-01-01', '2023-01-02', '2023-01-03', '2023-01-04', '2023-01-05',
    '2023-01-06', '2023-01-07', '2023-01-08', '2023-01-09', '2023-01-10',
    '2023-01-11', '2023-01-12', '2023-01-13', '2023-01-14', '2023-01-15',
    '2023-01-16', '2023-01-17', '2023-01-18', '2023-01-19', '2023-01-20',
    '2023-01-21', '2023-01-22', '2023-01-23', '2023-01-24', '2023-01-25',
    '2023-01-26', '2023-01-27', '2023-01-28', '2023-01-29', '2023-01-30',
    '2023-01-31', '2023-02-01', '2023-02-02', '2023-02-03', '2023-02-04',
    '2023-02-05', '2023-02-06', '2023-02-07', '2023-02-08', '2023-02-09',
    '2023-02-10', '2023-02-11', '2023-02-12', '2023-02-13', '2023-02-14',
    '2023-02-15', '2023-02-16', '2023-02-17', '2023-02-18', '2023-02-19',
    '2023-02-20', '2023-02-21', '2023-02-22', '2023-02-23', '2023-02-24',
    '2023-02-25', '2023-02-26', '2023-02-27', '2023-02-28', '2023-03-01'
]

price = [
    10, 94.56077962, 13.5483871, 102.043299, 17.09677419,
    80.47719034, 20.64516129, 106.1863637, 57.16677042, 25.96774194,
    113.4682754, 40.84578657, 31.29032258, 98.31954778, 62.89983476,
    36.61290323, 94.01987821, 40.16129032, 109.188625, 65.24511113,
    45.48387097, 47.25806452, 59.43269069, 50.80645161, 66.24110061,
    84.28740143, 56.12903226, 104.1992829, 95.81817681, 61.4516129,
    102.2464177, 65, 90.67075719, 68.5483871, 108.6191761, 61.56349007,
    72.09677419, 73.87096774, 70.76554806, 77.41935484, 100.9963222,
    80.96774194, 63.66486156, 82.74193548, 95.01154862, 102.3329297,
    96.23353649, 104.7204586, 93.38709677, 99.98405184, 95.16129032,
    108.7759006, 91.24777863, 103.9316232, 100, 101.7741935, 91.20592352,
    103.5483871, 105.3225806, 105
]

cash = [51.16646485, 34.27419355, 45.60296176, 38.70967742, 51.77419355, 32.62255557, 41.37096774, 20.42289329, 50.0, 29.71634535, 40.48387097, 47.28038981, 28.06451613, 54.30958805, 32.5, 30.78174504, 45.62388931, 51.0216495, 47.70577439, 46.69354839, 18.30645161, 49.99202592, 36.93548387, 40.23859517, 52.09964145, 47.9090884, 25.40322581, 30.72580645, 30.60296176, 47.0099391, 47.58064516, 8.5483871, 51.9658118, 45.3353786, 52.3602293, 53.09318185, 5.0, 10.32258065, 56.7341377, 47.58064516, 31.44991738, 45.62206176, 45.93548387, 22.74193548, 35.38277403, 51.77419355, 12.98387097, 28.58338521, 41.37096774, 23.62903226, 18.14516129, 42.14370072, 48.11676824, 30.88709677, 50.88709677, 51.12320885, 31.83243078, 30.72580645, 53., 47.58064516, 52.09964145]


# Merge datetime and price lists into a list of dictionaries
""" data_list = [{'datetime': dt, 'price': pr} for dt, pr in zip(date, price)] """

""" current_datetime = datetime.now()
print("current", current_datetime)
current_datetime = current_datetime.replace(second=0, microsecond=0)
print("current", current_datetime) """

""" count = 0
for data in data_list:
    data['datetime'] = current_datetime.isoformat()
    current_datetime += timedelta(minutes=1)
    count += 1 """

##print(count)
# Output data_list
#print(data_list)

""" data = [{'datetime': '2024-01-04T18:24:00', 'price': 10, 'units': 10, 'value': 100}, {'datetime': '2024-01-04T18:25:00', 'price': 94.56077962, 'units': 10, 'value': 945.6077962}, {'datetime': '2024-01-04T18:26:00', 'price': 13.5483871, 'units': 10, 'value': 135.483871}, {'datetime': '2024-01-04T18:27:00', 'price': 102.043299, 'units': 10, 'value': 1020.43299}, {'datetime': '2024-01-04T18:28:00', 'price': 17.09677419, 'units': 10, 'value': 170.96774190000002}, {'datetime': '2024-01-04T18:29:00', 'price': 80.47719034, 'units': 10, 'value': 804.7719034}, {'datetime': '2024-01-04T18:30:00', 'price': 20.64516129, 'units': 10, 'value': 206.45161290000001}, {'datetime': '2024-01-04T18:31:00', 'price': 106.1863637, 'units': 10, 'value': 1061.863637}, {'datetime': '2024-01-04T18:32:00', 'price': 57.16677042, 'units': 10, 'value': 571.6677042}, {'datetime': '2024-01-04T18:33:00', 'price': 25.96774194, 'units': 10, 'value': 259.6774194}, {'datetime': '2024-01-04T18:34:00', 'price': 113.4682754, 'units': 10, 'value': 1134.682754}, {'datetime': '2024-01-04T18:35:00', 'price': 40.84578657, 'units': 10, 'value': 408.4578657}, {'datetime': '2024-01-04T18:36:00', 'price': 31.29032258, 'units': 10, 'value': 312.90322580000003}, {'datetime': '2024-01-04T18:37:00', 'price': 98.31954778, 'units': 10, 'value': 983.1954777999999}, {'datetime': '2024-01-04T18:38:00', 'price': 62.89983476, 'units': 10, 'value': 628.9983476}, {'datetime': '2024-01-04T18:39:00', 'price': 36.61290323, 'units': 10, 'value': 366.1290323}, {'datetime': '2024-01-04T18:40:00', 'price': 94.01987821, 'units': 10, 'value': 940.1987821}, {'datetime': '2024-01-04T18:41:00', 'price': 40.16129032, 'units': 10, 'value': 401.6129032}, {'datetime': '2024-01-04T18:42:00', 'price': 109.188625, 'units': 10, 'value': 1091.88625}, {'datetime': '2024-01-04T18:43:00', 'price': 65.24511113, 'units': 10, 'value': 652.4511113}, {'datetime': '2024-01-04T18:44:00', 'price': 45.48387097, 'units': 10, 'value': 454.8387097}, {'datetime': '2024-01-04T18:45:00', 'price': 47.25806452, 'units': 10, 'value': 472.5806452}, {'datetime': '2024-01-04T18:46:00', 'price': 59.43269069, 'units': 10, 'value': 594.3269069}, {'datetime': '2024-01-04T18:47:00', 'price': 50.80645161, 'units': 10, 'value': 508.06451610000005}, {'datetime': '2024-01-04T18:48:00', 'price': 66.24110061, 'units': 12, 'value': 794.8932073200001}, {'datetime': '2024-01-04T18:49:00', 'price': 84.28740143, 'units': 12, 'value': 1011.4488171600001}, {'datetime': '2024-01-04T18:50:00', 'price': 56.12903226, 'units': 12, 'value': 673.54838712}, {'datetime': '2024-01-04T18:51:00', 'price': 104.1992829, 'units': 12, 'value': 1250.3913948}, {'datetime': '2024-01-04T18:52:00', 'price': 95.81817681, 'units': 12, 'value': 1149.81812172}, {'datetime': '2024-01-04T18:53:00', 'price': 61.4516129, 'units': 12, 'value': 737.4193548000001}, {'datetime': '2024-01-04T18:54:00', 'price': 102.2464177, 'units': 12, 'value': 1226.9570124}, {'datetime': '2024-01-04T18:55:00', 'price': 65, 'units': 12, 'value': 780}, {'datetime': '2024-01-04T18:56:00', 'price': 90.67075719, 'units': 12, 'value': 1088.04908628}, {'datetime': '2024-01-04T18:57:00', 'price': 68.5483871, 'units': 20, 'value': 1370.967742}, {'datetime': '2024-01-04T18:58:00', 'price': 108.6191761, 'units': 20, 'value': 2172.383522}, {'datetime': '2024-01-04T18:59:00', 'price': 61.56349007, 'units': 20, 'value': 1231.2698014}, {'datetime': '2024-01-04T19:00:00', 'price': 72.09677419, 'units': 20, 'value': 1441.9354838000002}, {'datetime': '2024-01-04T19:01:00', 'price': 73.87096774, 'units': 20, 'value': 1477.4193547999998}, {'datetime': '2024-01-04T19:02:00', 'price': 70.76554806, 'units': 20, 'value': 1415.3109612}, {'datetime': '2024-01-04T19:03:00', 'price': 77.41935484, 'units': 20, 'value': 1548.3870967999999}, {'datetime': '2024-01-04T19:04:00', 'price': 100.9963222, 'units': 20, 'value': 2019.926444}, {'datetime': '2024-01-04T19:05:00', 'price': 80.96774194, 'units': 20, 'value': 1619.3548388}, {'datetime': '2024-01-04T19:06:00', 'price': 63.66486156, 'units': 20, 'value': 1273.2972312}, {'datetime': '2024-01-04T19:07:00', 'price': 82.74193548, 'units': 20, 'value': 1654.8387096}, {'datetime': '2024-01-04T19:08:00', 'price': 95.01154862, 'units': 20, 'value': 1900.2309724}, {'datetime': '2024-01-04T19:09:00', 'price': 102.3329297, 'units': 20, 'value': 2046.658594}, {'datetime': '2024-01-04T19:10:00', 'price': 96.23353649, 'units': 20, 'value': 1924.6707298000001}, {'datetime': '2024-01-04T19:11:00', 'price': 104.7204586, 'units': 20, 'value': 2094.409172}, {'datetime': '2024-01-04T19:12:00', 'price': 93.38709677, 'units': 20, 'value': 1867.7419353999999}, {'datetime': '2024-01-04T19:13:00', 'price': 99.98405184, 'units': 20, 'value': 1999.6810368000001}, {'datetime': '2024-01-04T19:14:00', 'price': 95.16129032, 'units': 10, 'value': 951.6129032000001}, {'datetime': '2024-01-04T19:15:00', 'price': 108.7759006, 'units': 10, 'value': 1087.759006}, {'datetime': '2024-01-04T19:16:00', 'price': 91.24777863, 'units': 10, 'value': 912.4777862999999}, {'datetime': '2024-01-04T19:17:00', 'price': 103.9316232, 'units': 10, 'value': 1039.3162320000001}, {'datetime': '2024-01-04T19:18:00', 'price': 100, 'units': 30, 'value': 3000}, {'datetime': '2024-01-04T19:19:00', 'price': 101.7741935, 'units': 30, 'value': 3053.225805}, {'datetime': '2024-01-04T19:20:00', 'price': 91.20592352, 'units': 30, 'value': 2736.1777056}, {'datetime': '2024-01-04T19:21:00', 'price': 103.5483871, 'units': 30, 'value': 3106.451613}, {'datetime': '2024-01-04T19:22:00', 'price': 105.3225806, 'units': 30, 'value': 3159.6774179999998}, {'datetime': '2024-01-04T19:23:00', 'price': 105.3225806, 'units': 30, 'value': 3159.6774179999998}]

data2 = data

count = 0
for record in data2:
    record.pop('price')
    record.pop('units')
    record['value'] = price[count]
    count += 1


with open("output2.json", "w") as json_file:
    json.dump({"data": data2}, json_file, indent=2) """

values =  [
    {
      "datetime": "2024-01-04T18:24:00",
      "value": 10
    },
    {
      "datetime": "2024-01-04T18:25:00",
      "value": 94.56077962
    },
    {
      "datetime": "2024-01-04T18:26:00",
      "value": 13.5483871
    },
    {
      "datetime": "2024-01-04T18:27:00",
      "value": 102.043299
    },
    {
      "datetime": "2024-01-04T18:28:00",
      "value": 17.09677419
    },
    {
      "datetime": "2024-01-04T18:29:00",
      "value": 80.47719034
    },
    {
      "datetime": "2024-01-04T18:30:00",
      "value": 20.64516129
    },
    {
      "datetime": "2024-01-04T18:31:00",
      "value": 106.1863637
    },
    {
      "datetime": "2024-01-04T18:32:00",
      "value": 57.16677042
    },
    {
      "datetime": "2024-01-04T18:33:00",
      "value": 25.96774194
    },
    {
      "datetime": "2024-01-04T18:34:00",
      "value": 113.4682754
    },
    {
      "datetime": "2024-01-04T18:35:00",
      "value": 40.84578657
    },
    {
      "datetime": "2024-01-04T18:36:00",
      "value": 31.29032258
    },
    {
      "datetime": "2024-01-04T18:37:00",
      "value": 98.31954778
    },
    {
      "datetime": "2024-01-04T18:38:00",
      "value": 62.89983476
    },
    {
      "datetime": "2024-01-04T18:39:00",
      "value": 36.61290323
    },
    {
      "datetime": "2024-01-04T18:40:00",
      "value": 94.01987821
    },
    {
      "datetime": "2024-01-04T18:41:00",
      "value": 40.16129032
    },
    {
      "datetime": "2024-01-04T18:42:00",
      "value": 109.188625
    },
    {
      "datetime": "2024-01-04T18:43:00",
      "value": 65.24511113
    },
    {
      "datetime": "2024-01-04T18:44:00",
      "value": 45.48387097
    },
    {
      "datetime": "2024-01-04T18:45:00",
      "value": 47.25806452
    },
    {
      "datetime": "2024-01-04T18:46:00",
      "value": 59.43269069
    },
    {
      "datetime": "2024-01-04T18:47:00",
      "value": 50.80645161
    },
    {
      "datetime": "2024-01-04T18:48:00",
      "value": 66.24110061
    },
    {
      "datetime": "2024-01-04T18:49:00",
      "value": 84.28740143
    },
    {
      "datetime": "2024-01-04T18:50:00",
      "value": 56.12903226
    },
    {
      "datetime": "2024-01-04T18:51:00",
      "value": 104.1992829
    },
    {
      "datetime": "2024-01-04T18:52:00",
      "value": 95.81817681
    },
    {
      "datetime": "2024-01-04T18:53:00",
      "value": 61.4516129
    },
    {
      "datetime": "2024-01-04T18:54:00",
      "value": 102.2464177
    },
    {
      "datetime": "2024-01-04T18:55:00",
      "value": 65
    },
    {
      "datetime": "2024-01-04T18:56:00",
      "value": 90.67075719
    },
    {
      "datetime": "2024-01-04T18:57:00",
      "value": 68.5483871
    },
    {
      "datetime": "2024-01-04T18:58:00",
      "value": 108.6191761
    },
    {
      "datetime": "2024-01-04T18:59:00",
      "value": 61.56349007
    },
    {
      "datetime": "2024-01-04T19:00:00",
      "value": 72.09677419
    },
    {
      "datetime": "2024-01-04T19:01:00",
      "value": 73.87096774
    },
    {
      "datetime": "2024-01-04T19:02:00",
      "value": 70.76554806
    },
    {
      "datetime": "2024-01-04T19:03:00",
      "value": 77.41935484
    },
    {
      "datetime": "2024-01-04T19:04:00",
      "value": 100.9963222
    },
    {
      "datetime": "2024-01-04T19:05:00",
      "value": 80.96774194
    },
    {
      "datetime": "2024-01-04T19:06:00",
      "value": 63.66486156
    },
    {
      "datetime": "2024-01-04T19:07:00",
      "value": 82.74193548
    },
    {
      "datetime": "2024-01-04T19:08:00",
      "value": 95.01154862
    },
    {
      "datetime": "2024-01-04T19:09:00",
      "value": 102.3329297
    },
    {
      "datetime": "2024-01-04T19:10:00",
      "value": 96.23353649
    },
    {
      "datetime": "2024-01-04T19:11:00",
      "value": 104.7204586
    },
    {
      "datetime": "2024-01-04T19:12:00",
      "value": 93.38709677
    },
    {
      "datetime": "2024-01-04T19:13:00",
      "value": 99.98405184
    },
    {
      "datetime": "2024-01-04T19:14:00",
      "value": 95.16129032
    },
    {
      "datetime": "2024-01-04T19:15:00",
      "value": 108.7759006
    },
    {
      "datetime": "2024-01-04T19:16:00",
      "value": 91.24777863
    },
    {
      "datetime": "2024-01-04T19:17:00",
      "value": 103.9316232
    },
    {
      "datetime": "2024-01-04T19:18:00",
      "value": 100
    },
    {
      "datetime": "2024-01-04T19:19:00",
      "value": 101.7741935
    },
    {
      "datetime": "2024-01-04T19:20:00",
      "value": 91.20592352
    },
    {
      "datetime": "2024-01-04T19:21:00",
      "value": 103.5483871
    },
    {
      "datetime": "2024-01-04T19:22:00",
      "value": 105.3225806
    },
    {
      "datetime": "2024-01-04T19:23:00",
      "value": 105
    }
  ]

""" i = 0
for record in values:
    record["cash"] = cash[i]
    i += 1 """

portfolio_data = [
    {
      "datetime": "2024-01-04T18:24:00",
      "value": 10,
      "cash": 51.16646485
    },
    {
      "datetime": "2024-01-04T18:25:00",
      "value": 94.56077962,
      "cash": 34.27419355
    },
    {
      "datetime": "2024-01-04T18:26:00",
      "value": 13.5483871,
      "cash": 45.60296176
    },
    {
      "datetime": "2024-01-04T18:27:00",
      "value": 102.043299,
      "cash": 38.70967742
    },
    {
      "datetime": "2024-01-04T18:28:00",
      "value": 17.09677419,
      "cash": 51.77419355
    },
    {
      "datetime": "2024-01-04T18:29:00",
      "value": 80.47719034,
      "cash": 32.62255557
    },
    {
      "datetime": "2024-01-04T18:30:00",
      "value": 20.64516129,
      "cash": 41.37096774
    },
    {
      "datetime": "2024-01-04T18:31:00",
      "value": 106.1863637,
      "cash": 20.42289329
    },
    {
      "datetime": "2024-01-04T18:32:00",
      "value": 57.16677042,
      "cash": 50.0
    },
    {
      "datetime": "2024-01-04T18:33:00",
      "value": 25.96774194,
      "cash": 29.71634535
    },
    {
      "datetime": "2024-01-04T18:34:00",
      "value": 113.4682754,
      "cash": 40.48387097
    },
    {
      "datetime": "2024-01-04T18:35:00",
      "value": 40.84578657,
      "cash": 47.28038981
    },
    {
      "datetime": "2024-01-04T18:36:00",
      "value": 31.29032258,
      "cash": 28.06451613
    },
    {
      "datetime": "2024-01-04T18:37:00",
      "value": 98.31954778,
      "cash": 54.30958805
    },
    {
      "datetime": "2024-01-04T18:38:00",
      "value": 62.89983476,
      "cash": 32.5
    },
    {
      "datetime": "2024-01-04T18:39:00",
      "value": 36.61290323,
      "cash": 30.78174504
    },
    {
      "datetime": "2024-01-04T18:40:00",
      "value": 94.01987821,
      "cash": 45.62388931
    },
    {
      "datetime": "2024-01-04T18:41:00",
      "value": 40.16129032,
      "cash": 51.0216495
    },
    {
      "datetime": "2024-01-04T18:42:00",
      "value": 109.188625,
      "cash": 47.70577439
    },
    {
      "datetime": "2024-01-04T18:43:00",
      "value": 65.24511113,
      "cash": 46.69354839
    },
    {
      "datetime": "2024-01-04T18:44:00",
      "value": 45.48387097,
      "cash": 18.30645161
    },
    {
      "datetime": "2024-01-04T18:45:00",
      "value": 47.25806452,
      "cash": 49.99202592
    },
    {
      "datetime": "2024-01-04T18:46:00",
      "value": 59.43269069,
      "cash": 36.93548387
    },
    {
      "datetime": "2024-01-04T18:47:00",
      "value": 50.80645161,
      "cash": 40.23859517
    },
    {
      "datetime": "2024-01-04T18:48:00",
      "value": 66.24110061,
      "cash": 52.09964145
    },
    {
      "datetime": "2024-01-04T18:49:00",
      "value": 84.28740143,
      "cash": 47.9090884
    },
    {
      "datetime": "2024-01-04T18:50:00",
      "value": 56.12903226,
      "cash": 25.40322581
    },
    {
      "datetime": "2024-01-04T18:51:00",
      "value": 104.1992829,
      "cash": 30.72580645
    },
    {
      "datetime": "2024-01-04T18:52:00",
      "value": 95.81817681,
      "cash": 30.60296176
    },
    {
      "datetime": "2024-01-04T18:53:00",
      "value": 61.4516129,
      "cash": 47.0099391
    },
    {
      "datetime": "2024-01-04T18:54:00",
      "value": 102.2464177,
      "cash": 47.58064516
    },
    {
      "datetime": "2024-01-04T18:55:00",
      "value": 65,
      "cash": 8.5483871
    },
    {
      "datetime": "2024-01-04T18:56:00",
      "value": 90.67075719,
      "cash": 51.9658118
    },
    {
      "datetime": "2024-01-04T18:57:00",
      "value": 68.5483871,
      "cash": 45.3353786
    },
    {
      "datetime": "2024-01-04T18:58:00",
      "value": 108.6191761,
      "cash": 52.3602293
    },
    {
      "datetime": "2024-01-04T18:59:00",
      "value": 61.56349007,
      "cash": 53.09318185
    },
    {
      "datetime": "2024-01-04T19:00:00",
      "value": 72.09677419,
      "cash": 5.0
    },
    {
      "datetime": "2024-01-04T19:01:00",
      "value": 73.87096774,
      "cash": 10.32258065
    },
    {
      "datetime": "2024-01-04T19:02:00",
      "value": 70.76554806,
      "cash": 56.7341377
    },
    {
      "datetime": "2024-01-04T19:03:00",
      "value": 77.41935484,
      "cash": 47.58064516
    },
    {
      "datetime": "2024-01-04T19:04:00",
      "value": 100.9963222,
      "cash": 31.44991738
    },
    {
      "datetime": "2024-01-04T19:05:00",
      "value": 80.96774194,
      "cash": 45.62206176
    },
    {
      "datetime": "2024-01-04T19:06:00",
      "value": 63.66486156,
      "cash": 45.93548387
    },
    {
      "datetime": "2024-01-04T19:07:00",
      "value": 82.74193548,
      "cash": 22.74193548
    },
    {
      "datetime": "2024-01-04T19:08:00",
      "value": 95.01154862,
      "cash": 35.38277403
    },
    {
      "datetime": "2024-01-04T19:09:00",
      "value": 102.3329297,
      "cash": 51.77419355
    },
    {
      "datetime": "2024-01-04T19:10:00",
      "value": 96.23353649,
      "cash": 12.98387097
    },
    {
      "datetime": "2024-01-04T19:11:00",
      "value": 104.7204586,
      "cash": 28.58338521
    },
    {
      "datetime": "2024-01-04T19:12:00",
      "value": 93.38709677,
      "cash": 41.37096774
    },
    {
      "datetime": "2024-01-04T19:13:00",
      "value": 99.98405184,
      "cash": 23.62903226
    },
    {
      "datetime": "2024-01-04T19:14:00",
      "value": 95.16129032,
      "cash": 18.14516129
    },
    {
      "datetime": "2024-01-04T19:15:00",
      "value": 108.7759006,
      "cash": 42.14370072
    },
    {
      "datetime": "2024-01-04T19:16:00",
      "value": 91.24777863,
      "cash": 48.11676824
    },
    {
      "datetime": "2024-01-04T19:17:00",
      "value": 103.9316232,
      "cash": 30.88709677
    },
    {
      "datetime": "2024-01-04T19:18:00",
      "value": 100,
      "cash": 50.88709677
    },
    {
      "datetime": "2024-01-04T19:19:00",
      "value": 101.7741935,
      "cash": 51.12320885
    },
    {
      "datetime": "2024-01-04T19:20:00",
      "value": 91.20592352,
      "cash": 31.83243078
    },
    {
      "datetime": "2024-01-04T19:21:00",
      "value": 103.5483871,
      "cash": 30.72580645
    },
    {
      "datetime": "2024-01-04T19:22:00",
      "value": 105.3225806,
      "cash": 53.0
    },
    {
      "datetime": "2024-01-04T19:23:00",
      "value": 105,
      "cash": 47.58064516
    }
  ]

aapl_data = [
    {
      "datetime": "2024-01-04T18:24:00",
      "price": 10,
      "units": 10,
      "value": 100
    },
    {
      "datetime": "2024-01-04T18:25:00",
      "price": 94.56077962,
      "units": 10,
      "value": 945.6077962
    },
    {
      "datetime": "2024-01-04T18:26:00",
      "price": 13.5483871,
      "units": 10,
      "value": 135.483871
    },
    {
      "datetime": "2024-01-04T18:27:00",
      "price": 102.043299,
      "units": 10,
      "value": 1020.43299
    },
    {
      "datetime": "2024-01-04T18:28:00",
      "price": 17.09677419,
      "units": 10,
      "value": 170.96774190000002
    },
    {
      "datetime": "2024-01-04T18:29:00",
      "price": 80.47719034,
      "units": 10,
      "value": 804.7719034
    },
    {
      "datetime": "2024-01-04T18:30:00",
      "price": 20.64516129,
      "units": 10,
      "value": 206.45161290000001
    },
    {
      "datetime": "2024-01-04T18:31:00",
      "price": 106.1863637,
      "units": 10,
      "value": 1061.863637
    },
    {
      "datetime": "2024-01-04T18:32:00",
      "price": 57.16677042,
      "units": 10,
      "value": 571.6677042
    },
    {
      "datetime": "2024-01-04T18:33:00",
      "price": 25.96774194,
      "units": 10,
      "value": 259.6774194
    },
    {
      "datetime": "2024-01-04T18:34:00",
      "price": 113.4682754,
      "units": 10,
      "value": 1134.682754
    },
    {
      "datetime": "2024-01-04T18:35:00",
      "price": 40.84578657,
      "units": 10,
      "value": 408.4578657
    },
    {
      "datetime": "2024-01-04T18:36:00",
      "price": 31.29032258,
      "units": 10,
      "value": 312.90322580000003
    },
    {
      "datetime": "2024-01-04T18:37:00",
      "price": 98.31954778,
      "units": 10,
      "value": 983.1954777999999
    },
    {
      "datetime": "2024-01-04T18:38:00",
      "price": 62.89983476,
      "units": 10,
      "value": 628.9983476
    },
    {
      "datetime": "2024-01-04T18:39:00",
      "price": 36.61290323,
      "units": 10,
      "value": 366.1290323
    },
    {
      "datetime": "2024-01-04T18:40:00",
      "price": 94.01987821,
      "units": 10,
      "value": 940.1987821
    },
    {
      "datetime": "2024-01-04T18:41:00",
      "price": 40.16129032,
      "units": 10,
      "value": 401.6129032
    },
    {
      "datetime": "2024-01-04T18:42:00",
      "price": 109.188625,
      "units": 10,
      "value": 1091.88625
    },
    {
      "datetime": "2024-01-04T18:43:00",
      "price": 65.24511113,
      "units": 10,
      "value": 652.4511113
    },
    {
      "datetime": "2024-01-04T18:44:00",
      "price": 45.48387097,
      "units": 10,
      "value": 454.8387097
    },
    {
      "datetime": "2024-01-04T18:45:00",
      "price": 47.25806452,
      "units": 10,
      "value": 472.5806452
    },
    {
      "datetime": "2024-01-04T18:46:00",
      "price": 59.43269069,
      "units": 10,
      "value": 594.3269069
    },
    {
      "datetime": "2024-01-04T18:47:00",
      "price": 50.80645161,
      "units": 10,
      "value": 508.06451610000005
    },
    {
      "datetime": "2024-01-04T18:48:00",
      "price": 66.24110061,
      "units": 12,
      "value": 794.8932073200001
    },
    {
      "datetime": "2024-01-04T18:49:00",
      "price": 84.28740143,
      "units": 12,
      "value": 1011.4488171600001
    },
    {
      "datetime": "2024-01-04T18:50:00",
      "price": 56.12903226,
      "units": 12,
      "value": 673.54838712
    },
    {
      "datetime": "2024-01-04T18:51:00",
      "price": 104.1992829,
      "units": 12,
      "value": 1250.3913948
    },
    {
      "datetime": "2024-01-04T18:52:00",
      "price": 95.81817681,
      "units": 12,
      "value": 1149.81812172
    },
    {
      "datetime": "2024-01-04T18:53:00",
      "price": 61.4516129,
      "units": 12,
      "value": 737.4193548000001
    },
    {
      "datetime": "2024-01-04T18:54:00",
      "price": 102.2464177,
      "units": 12,
      "value": 1226.9570124
    },
    {
      "datetime": "2024-01-04T18:55:00",
      "price": 65,
      "units": 12,
      "value": 780
    },
    {
      "datetime": "2024-01-04T18:56:00",
      "price": 90.67075719,
      "units": 12,
      "value": 1088.04908628
    },
    {
      "datetime": "2024-01-04T18:57:00",
      "price": 68.5483871,
      "units": 20,
      "value": 1370.967742
    },
    {
      "datetime": "2024-01-04T18:58:00",
      "price": 108.6191761,
      "units": 20,
      "value": 2172.383522
    },
    {
      "datetime": "2024-01-04T18:59:00",
      "price": 61.56349007,
      "units": 20,
      "value": 1231.2698014
    },
    {
      "datetime": "2024-01-04T19:00:00",
      "price": 72.09677419,
      "units": 20,
      "value": 1441.9354838000002
    },
    {
      "datetime": "2024-01-04T19:01:00",
      "price": 73.87096774,
      "units": 20,
      "value": 1477.4193547999998
    },
    {
      "datetime": "2024-01-04T19:02:00",
      "price": 70.76554806,
      "units": 20,
      "value": 1415.3109612
    },
    {
      "datetime": "2024-01-04T19:03:00",
      "price": 77.41935484,
      "units": 20,
      "value": 1548.3870967999999
    },
    {
      "datetime": "2024-01-04T19:04:00",
      "price": 100.9963222,
      "units": 20,
      "value": 2019.926444
    },
    {
      "datetime": "2024-01-04T19:05:00",
      "price": 80.96774194,
      "units": 20,
      "value": 1619.3548388
    },
    {
      "datetime": "2024-01-04T19:06:00",
      "price": 63.66486156,
      "units": 20,
      "value": 1273.2972312
    },
    {
      "datetime": "2024-01-04T19:07:00",
      "price": 82.74193548,
      "units": 20,
      "value": 1654.8387096
    },
    {
      "datetime": "2024-01-04T19:08:00",
      "price": 95.01154862,
      "units": 20,
      "value": 1900.2309724
    },
    {
      "datetime": "2024-01-04T19:09:00",
      "price": 102.3329297,
      "units": 20,
      "value": 2046.658594
    },
    {
      "datetime": "2024-01-04T19:10:00",
      "price": 96.23353649,
      "units": 20,
      "value": 1924.6707298000001
    },
    {
      "datetime": "2024-01-04T19:11:00",
      "price": 104.7204586,
      "units": 20,
      "value": 2094.409172
    },
    {
      "datetime": "2024-01-04T19:12:00",
      "price": 93.38709677,
      "units": 20,
      "value": 1867.7419353999999
    },
    {
      "datetime": "2024-01-04T19:13:00",
      "price": 99.98405184,
      "units": 20,
      "value": 1999.6810368000001
    },
    {
      "datetime": "2024-01-04T19:14:00",
      "price": 95.16129032,
      "units": 10,
      "value": 951.6129032000001
    },
    {
      "datetime": "2024-01-04T19:15:00",
      "price": 108.7759006,
      "units": 10,
      "value": 1087.759006
    },
    {
      "datetime": "2024-01-04T19:16:00",
      "price": 91.24777863,
      "units": 10,
      "value": 912.4777862999999
    },
    {
      "datetime": "2024-01-04T19:17:00",
      "price": 103.9316232,
      "units": 10,
      "value": 1039.3162320000001
    },
    {
      "datetime": "2024-01-04T19:18:00",
      "price": 100,
      "units": 30,
      "value": 3000
    },
    {
      "datetime": "2024-01-04T19:19:00",
      "price": 101.7741935,
      "units": 30,
      "value": 3053.225805
    },
    {
      "datetime": "2024-01-04T19:20:00",
      "price": 91.20592352,
      "units": 30,
      "value": 2736.1777056
    },
    {
      "datetime": "2024-01-04T19:21:00",
      "price": 103.5483871,
      "units": 30,
      "value": 3106.451613
    },
    {
      "datetime": "2024-01-04T19:22:00",
      "price": 105.3225806,
      "units": 30,
      "value": 3159.6774179999998
    },
    {
      "datetime": "2024-01-04T19:23:00",
      "price": 105.3225806,
      "units": 30,
      "value": 3159.6774179999998
    }
  ]

count = 0
for record in portfolio_data:
    record['assets'] = [aapl_data[count]]
    
    record['assets'][0].pop('datetime')
    record['assets'][0]["ticker"] = "AAPL"
    count += 1

with open("output4.json", "w") as json_file:
    json.dump({"data": portfolio_data}, json_file, indent=2)
